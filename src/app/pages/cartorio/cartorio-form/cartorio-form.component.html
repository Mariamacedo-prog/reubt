<div class="container-form ">
    <mat-card class="card-form " >
      <mat-card-header>
        <mat-card-title>Cadastro de Cartorio</mat-card-title>
      </mat-card-header>
  
      <form [formGroup]="formControls">
        <mat-card-content >
          <mat-tab-group animationDuration="700ms" >
            <mat-tab  formGroupName="cartorio" > 
              <ng-template mat-tab-label>
                <span [ngClass]="formControls.get('cartorio')?.invalid ?'tab-invalid' : ''">Dados Cartório</span>
              </ng-template>
              <mat-form-field>
                <mat-label>Nome</mat-label>
                <input [readonly]="visualizar"  matInput formControlName="nome" />
                <mat-error *ngIf="formControls.get('cartorio.nome')?.hasError('required')">
                  Este campo é <strong>obrigatório</strong>
                </mat-error>
              </mat-form-field>
  
              <div>
                <mat-form-field>
                  <mat-label>CNPJ</mat-label>
                  <input [readonly]="visualizar"  matInput formControlName="cnpj" />
                  <mat-error *ngIf="formControls.get('cartorio.cnpj')?.hasError('required')">
                    Este campo é <strong>obrigatório</strong>
                  </mat-error>
                  <mat-error *ngIf="formControls.get('cartorio.cnpj')?.hasError('cnpjInvalido')">CNPJ inválido</mat-error>
                </mat-form-field>
  
                <mat-form-field>
                  <mat-label>Telefone</mat-label>
                  <input [readonly]="visualizar"  matInput  formControlName="telefone" (input)="formatarTelefone()" />
                  <mat-error *ngIf="formControls.get('cartorio.telefone')?.hasError('pattern')">
                    Por favor digite um telefone válido.
                  </mat-error>
                  <mat-error *ngIf="formControls.get('cartorio.telefone')?.hasError('required')">
                    Este campo é <strong>obrigatório</strong>
                  </mat-error>
                </mat-form-field> 
              </div>
                
              <mat-form-field>
                <mat-label>Email</mat-label>
                <input [readonly]="visualizar" type="email" matInput formControlName="email"  placeholder="Ex.pat@example.com" />
                <mat-error *ngIf="formControls.get('cartorio.email')?.hasError('email') && !formControls.get('cartorio.email')?.hasError('required')">
                  Please enter a valid email address
                </mat-error>
                <mat-error *ngIf="formControls.get('cartorio.email')?.hasError('required')" >
                  Este campo é <strong>obrigatório</strong>
                </mat-error>
              </mat-form-field>
            </mat-tab>
  
            <mat-tab  formGroupName="representante" >
              <ng-template mat-tab-label>
                <span [ngClass]="formControls.get('representante')?.invalid ?'tab-invalid' : ''">Dados Responsável</span>
              </ng-template>
              <mat-form-field>
                  <mat-label>Nome</mat-label>
                  <input [readonly]="visualizar"  matInput formControlName="nome" />
                  <mat-error *ngIf="formControls.get('representante.nome')?.hasError('required')">
                    Este campo é <strong>obrigatório</strong>
                  </mat-error>
                </mat-form-field>
  
                <div>
                  <mat-form-field>
                    <mat-label>CPF</mat-label>
                    <input [readonly]="visualizar"  matInput formControlName="cpf" />
                    <mat-error *ngIf="formControls.get('representante.cpf')?.hasError('required')">
                      Este campo é <strong>obrigatório</strong>
                    </mat-error>
                    <mat-error *ngIf="formControls.get('representante.cpf')?.hasError('cpfInvalido')">CPF inválido</mat-error>
                  </mat-form-field>
                  
                  <mat-form-field>
                    <mat-label>Cargo</mat-label>
                    <input [readonly]="visualizar"  matInput formControlName="cargo" />
                    <mat-error *ngIf="formControls.get('representante.cargo')?.hasError('required')">
                      Este campo é <strong>obrigatório</strong>
                    </mat-error>
                  </mat-form-field>

                  <mat-form-field>
                    <mat-label>RG</mat-label>
                    <input [readonly]="visualizar" matInput formControlName="rg" />
                    <mat-error *ngIf="formControls.get('representante.rg')?.hasError('required')">
                      Este campo é <strong>obrigatório</strong>
                    </mat-error>
                    <mat-error *ngIf="formControls.get('representante.rg')?.hasError('rgInvalid')">
                      Número do RG inválido.
                    </mat-error>
                  </mat-form-field> 
                </div>
                
                <div>
                  <mat-form-field>
                    <mat-label>Nacionalidade</mat-label>
                    <input [readonly]="visualizar" matInput formControlName="nacionalidade" />
                    <mat-error *ngIf="formControls.get('representante.nacionalidade')?.hasError('required')">
                      Este campo é <strong>obrigatório</strong>
                    </mat-error>
                  </mat-form-field> 
                  <div>
                    <mat-form-field class="search-field">
                      <mat-label>Estado Civil</mat-label>
                      <mat-select formControlName="estadoCivil">
                        <mat-option *ngFor="let estado of estadoCivil" [value]="estado.label">{{estado.label}}</mat-option>
                      </mat-select>
                      <mat-error *ngIf="formControls.get('representante.estadoCivil')?.hasError('required')">Este campo é <strong>obrigatório</strong></mat-error>
                    </mat-form-field>
                  </div>
                </div>
            </mat-tab>
  
            <mat-tab formGroupName="endereco" > 
              <ng-template mat-tab-label>
                <span [ngClass]="formControls.get('endereco')?.invalid ?'tab-invalid' : ''">Endereço</span>
              </ng-template>
              
             
              <mat-form-field>
                  <mat-label>CEP</mat-label>
                  <input [readonly]="visualizar" (keyup)="buscarEndereco()" maxlength="8" type="text" matInput formControlName="cep"/>
                  <mat-error *ngIf="formControls.get('endereco.cep')?.hasError('required')" >
                    Este campo é <strong>obrigatório</strong>
                  </mat-error>
                </mat-form-field>
      
                <div>
                  <mat-form-field>
                    <mat-label>Rua</mat-label>
                    <input [readonly]="visualizar"  type="text" matInput formControlName="rua" />
                    <mat-error *ngIf="formControls.get('endereco.rua')?.hasError('required')">
                      Este campo é <strong>obrigatório</strong>
                    </mat-error>
                  </mat-form-field>
                  <div>
                    <mat-form-field>
                      <mat-label>Número</mat-label>
                      <input [readonly]="visualizar"  type="text" matInput formControlName="numero" />
                      <mat-error *ngIf="formControls.get('endereco.numero')?.hasError('required')" >
                        Este campo é <strong>obrigatório</strong>
                      </mat-error>
                    </mat-form-field>
                    <mat-form-field>
                      <mat-label>Complemento</mat-label>
                      <input [readonly]="visualizar" type="text" matInput formControlName="complemento" />
                    </mat-form-field>
                  </div>
                </div>
                
                <div>
                  <mat-form-field>
                    <mat-label>Bairro</mat-label>
                    <input [readonly]="visualizar"  type="text" matInput  formControlName="bairro" />
                    <mat-error *ngIf="formControls.get('endereco.bairro')?.hasError('required')" >
                      Este campo é <strong>obrigatório</strong>
                    </mat-error>
                  </mat-form-field>
        
                  <mat-form-field>
                    <mat-label>Cidade/UF</mat-label>
                    <input [readonly]="visualizar"  type="text" matInput formControlName="cidadeUf"  />
                    <mat-error *ngIf="formControls.get('endereco.cidadeUf')?.hasError('required')" >
                      Este campo é <strong>obrigatório</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
            </mat-tab>
          </mat-tab-group>
    
    
    
          <div class="area-botao-form " *ngIf="isLoggedIn && this.cartorioId === 0 || this.cartorioId === undefined">
            <button mat-raised-button color="primary" (click)="cadastrar()" [disabled]="!formularioValido()">Cadastrar</button>
            <button  mat-raised-button color="link" routerLink="/lista/cartorios">Voltar</button>
          </div>
  
          <div class="area-botao-form " *ngIf="isLoggedIn && this.cartorioId !== 0 && this.cartorioId !== undefined">
            <button *ngIf="!visualizar" mat-raised-button color="primary" (click)="atualizar()"  [disabled]="!formularioValido()"> Atualizar</button>
            <button mat-raised-button color="link" routerLink="/lista/cartorios">Voltar</button>
          </div>
        </mat-card-content>
      </form>
    </mat-card>
  </div>